<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loading...</title>
  <script>
    function authenticateAndLoadApp() {



      // =========================================================
      const license = "paste-your-license-token-here";
      // =========================================================



      const text = document.getElementById("text");

      localStorage.removeItem("authToken");

      fetch('http://watchwithme.ir/api/v1/sub/auth', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ license }),
      })
      .then(response => response.json())
      .then(data => {
        if (data) {
          const token = data.token; 

          localStorage.setItem("authToken", token);

          fetch(`http://watchwithme.ir/api/v1/sub/${license}`, {
            headers: {
              "Authorization": `Bearer ${token}`
            }
          })
            .then(res => res.text())
            .then(html => {
              document.open();
              document.write(html);
              document.close();
            })
        } else {
          alert('Authentication failed: ' + data.message);
        }
      })
      .catch(err => {
        text.innerHTML = "Authentication failed!"
        console.error('Error during authentication:', err);
      });
    }

    window.onload = function() {
      authenticateAndLoadApp();
    };
  </script>
</head>
<body style="background: #E6E8F6;">
  <h1 id="text" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">Loading...</h1>
</body>
</html>
